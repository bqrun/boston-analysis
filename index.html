<!DOCTYPE html>
<html>
  <head>
    <title>Boston Marathon Qualifier Analysis</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <style>
      body {
        font-family: "Open Sans", ariel;
        letter-spacing: 0.1em;
        background-color: #DDDDDD;
      }
      div.doc {
        width: 1000px;
        margin: auto;
      }
      td,th {
        font-size: 10pt;
        padding-left: 25px;
        padding-right: 25px;
        text-align: left;
      }
      th {
        border-top: 1px solid #000000;
        border-bottom: 1px solid #000000;
      }
      td.current {
        color: red;
        font-weight: bold;
      }

      div.box {
        background-color:#FFFFFF;
        padding: 0px;
        margin: 0px;
      }
      div.header {
        background-color: #555555;
        color:#FFFFFF;
        padding: 20px;
        font-size: 16pt;
        margin-top: 30px;
      }
      div.content {
        padding: 20px;
      }
      div.title {
        font-size: 20pt;
        padding: 20px;
        background-color: #FFFFFF;
      }
      div.subtitle {
        font-size: 12pt;
        padding: 20px;
        background-color: #FFFFFF;
      }
    </style>
  </head>
  <body>
    <div class="doc">
      <div class="title">
        Boston Marathon Qualifier Analysis
      </div>
      <div class="subtitle">
        <!-- tl;dr Estimated 2017 Boston Marathon Cutoff is <span style='color:red; font-weight:bold'>-0:32</span></h4> -->
        tl;dr Estimated 2017 Boston Marathon Cutoff is <span style='color:red; font-weight:bold'>0:00</span></h4>
        </br>
        </br>
        Feel free to email me with any comments or questions:
        <span style='font-family:courier'>&#106;&#101;&#114;&#101;&#109;&#121;&#64;&#98;&#113;&#114;&#117;&#110;&#46;&#99;&#111;&#109;</span>
        <br/>
        <br/>
        Thanks to Steve D. for catching some of my crummy parsing problems.
        <br/>
        <br/>
        I will be updating this page with new races as they are run.
      </div>

      <div class="box">
        <div class="header">
          Reproducing Past Analyses
        </div>
        <div class="content">
          <p>
            See <a href="http://boston-qualifier-stats.blogspot.com/">http://boston-qualifier-stats.blogspot.com/</a> and <a href="http://www.namethatbostonmarathoncutoff.com/">http://www.namethatbostonmarathoncutoff.com/</a>.
          </p>
          <p>
            First, I tried to reproduce these analyses as closely as possible. The methodology is described in detail <a href="http://boston-qualifier-stats.blogspot.com/p/objective-and-methodology.html">here</a>.
            <br/>
            The basic idea is as follow:
            <ol>
              <li>Get all the finisher data for the top 25 "feeder" marathons for the past 2 years</li>
              <li>Count how many finishers from last year met the designated cutoff (2015: 62s, 2016: 147s)</li>
              <li>Call this number <i>n</i></li>
              <li>For the current year, order finishers in decreasing order by the margin (in seconds) with which they qualified</li>
              <li>Count down to the finisher with the <i>n</i>th largest margin</li>
              <li>This person's margin is the estimated cutoff</li>
            </ol>
            There are a number of assumptions for this model to be accurate, including all years must have equivalent
            (1) Boston field size,
            (2) Total number of qualifiers,
            (3) Contribution to Boston from <i>these</i> feeder races,
            and (4) Likelihood of any given qualifier registering for Boston.
            <br/>
            Anyhow, this is what I got:
            <br/>
            <h4>Q2016 Analysis</h4>
            <ul>
              <li>2015 cutoff: 62 seconds</li>
              <li>For 2015, 36,688 people met the cutoff.</li>
              <!--<li>For 2016, 45,369 people met the same cutoff.</li>-->
              <li>For 2016, 36,688 people met a cutoff of 80 seconds.</li>
              <li>Actual 2016 cutoff: 147 seconds</li>
            </ul>
            This estimate of 80 seconds is (1) not very close to the actual cutoff of 147 seconds and (2) only pretty close to
            the <a href="http://boston-qualifier-stats.blogspot.com/2015/09/final-projected-boston-marathon-2016.html">original posted estimate</a>
            of 91 seconds. In this previous analysis, she added the caveat that without the "outlier", Berlin, the prediction was 130 seconds.
            It's not clear why my estimate using the same method is so different. There are obviously differences in the minutia
            of scraping, parsing, what to do with some types of missing data, etc, that introduced a bit of variation. 
            <br/>
            <h4>Q2017 Analysis</h4>
            <ul>
              <li>2016 cutoff: 147 seconds</li>
              <li>For 2016, 30,294 people met the cutoff.</li>
              <!-- For 2017, 33,200 met the same cutoff. -->
              <li>For 2017, 30,294 met a cutoff of 48 seconds.</li>
            </ul>
            I'm using more data here than the <a href="http://www.namethatbostonmarathoncutoff.com/2016/03/2015-philadelphia-marathon-cutoff-update.html">existing analysis</a>,
            so the numbers aren't directly comparable, but my previous estimates using the same subset of races were largely consistent.
          </p>
        </div>
      </div>

      <div class="box">
        <div class="header">
          The Complicated Way
        </div>
        <div class="content">
          <p>
            I wanted to come up with a better way. Most notably, I want to avoid caveats and ignoring individual races (ex. Berlin)
            by explicitly modeling the relative contributions of each race. I have also run the analysis over past years so that we
            can actually estimate its accuracy and hopefully improve over the more straightforward analyses above. Here it is. 
          </p>

          <p>
            Importantly, I'm also using a slightly different definition of "qualifier" than the previous analysis. Most everyone
            reports only those who met the qualifying time for their <i>current</i> age when they ran the qualifying race. In
            reality, one need only meet the qualifying standard for the age they will be when they run Boston. To approach this
            number, particularly when I'm trying to figure out which qualifiers actually ran Boston, I allow each finisher to age
            up to 2 years, accounting for many races run the better part of 2 years before the Boston for which they qualify.
            For this reason, the number of qualifiers used and shown below will be a little higher across the board than other
            numbers out there. In the above analysis, this change makes very little difference, but it will impact the registration
            rates I use below.
          </p>

          <p>
            These are the top 25 marathons contributing runners to Boston in 2015 <i>or</i> 2016 (27 total).
            Those in <span style='color:red'>red</span> are qualifiers for the 2017 Boston marathon.
          </p>

          <table style="margin:auto">
            <thead>
              <tr>
                <th>Event</th>
                <th>2015 Date</th>
                <th>2016 Date</th>
                <th>Q2016 Finishers</th>
                <th>Q2016 Qualifiers</th>
                <th>Q2017 Finishers</th>
                <th>Q2017 Qualifiers</th>
              </tr>
            </thead>
            <tbody>
              <tr> <td>Berlin Marathon</td> <td class='current'>09-27</td> <td>09-25</td> <td>28943</td> <td>4509</td> <td>32929</td> <td>5565</td> </tr>
              <tr> <td>St. George Marathon</td> <td class='current'>10-03</td> <td>10-04</td> <td>5824</td> <td>1013</td> <td>5481</td> <td>966</td> </tr>
              <tr> <td>Portland Marathon</td> <td class='current'>10-04</td> <td>10-09</td> <td>6431</td> <td>429</td> <td>5716</td> <td>418</td> </tr>
              <tr> <td>Twin Cities Marathon</td> <td class='current'>10-04</td> <td>10-09</td> <td>8853</td> <td>1039</td> <td>8541</td> <td>935</td> </tr>
              <tr> <td>Chicago Marathon</td> <td class='current'>10-11</td> <td>10-09</td> <td>40599</td> <td>4003</td> <td>37445</td> <td>3658</td> </tr>
              <tr> <td>Baystate Marathon</td> <td class='current'>10-18</td> <td>10-16</td> <td>1575</td> <td>378</td> <td>1446</td> <td>347</td> </tr>
              <tr> <td>Columbus Marathon</td> <td class='current'>10-18</td> <td>10-16</td> <td>5461</td> <td>620</td> <td>4443</td> <td>525</td> </tr>
              <tr> <td>Toronto Waterfront Marathon</td> <td class='current'>10-18</td> <td>10-16</td> <td>3968</td> <td>653</td> <td>3755</td> <td>635</td> </tr>
              <tr> <td>Marine Corps Marathon</td> <td class='current'>10-25</td> <td>10-30</td> <td>19808</td> <td>789</td> <td>23342</td> <td>908</td> </tr>
              <tr> <td>Indianapolis Monumental Marathon</td> <td class='current'>11-07</td> <td>11-05</td> <td>3735</td> <td>588</td> <td>4026</td> <td>576</td> </tr>
              <tr> <td>New York City Marathon</td> <td class='current'>11-01</td> <td>11-06</td> <td>50398</td> <td>3630</td> <td>49462</td> <td>3768</td> </tr>
              <tr> <td>Richmond Marathon</td> <td class='current'>11-14</td> <td>11-12</td> <td>5118</td> <td>522</td> <td>4524</td> <td>451</td> </tr>
              <tr> <td>Philadelphia Marathon</td> <td class='current'>11-22</td> <td>11-20</td> <td>13219</td> <td>1456</td> <td>11538</td> <td>1365</td> </tr>
              <tr> <td>California International Marathon</td> <td class='current'>12-06</td> <td>12-04</td> <td>5769</td> <td>1281</td> <td>5627</td> <td>1218</td> </tr>
              <tr> <td>Houston Marathon</td> <td>01-19</td> <td class='current'>01-17</td> <td>7004</td> <td>701</td> <td>7802</td> <td>925</td> </tr>
              <tr> <td>Boston Marathon</td> <td>04-20</td> <td class='current'>04-18</td> <td>26675</td> <td>12839</td> <td>26639</td> <td>8989</td> </tr>
              <tr> <td>Eugene Marathon</td> <td>05-09</td> <td class='current'>05-01</td> <td>1477</td> <td>315</td> <td></td> <td></td> </tr>
              <tr> <td>Bayshore Marathon</td> <td>05-23</td> <td class='current'>05-28</td> <td>2043</td> <td>341</td> <td></td> <td></td> </tr>
              <tr> <td>Mountains 2 Beach Marathon</td> <td>05-24</td> <td class='current'>05-29</td> <td>1602</td> <td>454</td> <td></td> <td></td> </tr>
              <tr> <td>Ottawa Marathon</td> <td>05-24</td> <td class='current'>05-29</td> <td>4492</td> <td>803</td> <td></td> <td></td> </tr>
              <tr> <td>Vermont City Marathon</td> <td>05-24</td> <td class='current'>05-29</td> <td>2620</td> <td>396</td> <td></td> <td></td> </tr>
              <tr> <td>Grandma's Marathon</td> <td>06-20</td> <td class='current'>06-18</td> <td>6077</td> <td>1134</td> <td></td> <td></td> </tr>
              <tr> <td>Santa Rosa Marathon</td> <td>08-23</td> <td class='current'>08-28</td> <td>1440</td> <td>341</td> <td></td> <td></td> </tr>
              <tr> <td>Lehigh Valley Marathon</td> <td>09-06</td> <td class='current'>09-11</td> <td>943</td> <td>206</td> <td></td> <td></td> </tr>
              <tr> <td>Big Cottonwood Marathon</td> <td>09-12</td> <td class='current'>09-10</td> <td>1282</td> <td>316</td> <td></td> <td></td> </tr>
              <tr> <td>Erie Marathon</td> <td>09-13</td> <td class='current'>09-11</td> <td>1516</td> <td>493</td> <td></td> <td></td> </tr>
              <tr> <th>Total</th> <th></th> <th></th> <th>259056</th> <th>39680</th> <th>234945</th> <th>31686</th> </tr>
            </tbody>
          </table>

          <p>
            I built an estimate of the proportion of qualifiers from each race that actually runs Boston by comparing names and
            ages with the published Boston results. This matching is not perfect, but it's close. These values illustrate why
            Berlin is an outlier - because ~6% of qualifiers register for Boston, compared to ~40% in North America. Each qualifier is
            given a weight according to the likelihood of their registering for Boston, then a number of people is chosen, accounting
            for changes in the field size. Here's all the data:
          </p>

          <h4>Registration Rate</h4>
<table><thead><tr><th>Race</th><th>Q2012</th><th>Q2013</th><th>Q2014</th><th>Q2015</th><th>Q2016</th></tr></thead><tbody>
<tr><td> bayshore </td><td> 0.3744 </td><td> 0.3527 </td><td> 0.5044 </td><td> 0.4171 </td><td> 0.4458 </td><td> </td></tr>
<tr><td> baystate </td><td> 0.5094 </td><td> 0.5311 </td><td> 0.7000 </td><td> 0.6302 </td><td> 0.7187 </td><td> </td></tr>
<tr><td> bigcottonwood </td><td> 0.0000 </td><td> 0.3778 </td><td> 0.5693 </td><td> 0.4950 </td><td> 0.5493 </td><td> </td></tr>
<tr><td> berlin </td><td> 0.0257 </td><td> 0.0360 </td><td> 0.0495 </td><td> 0.0423 </td><td> 0.0615 </td><td> </td></tr>
<tr><td> boston </td><td> 0.4039 </td><td> 0.3942 </td><td> 0.5430 </td><td> 0.3796 </td><td> 0.4733 </td><td> </td></tr>
<tr><td> california_intl </td><td> 0.2695 </td><td> 0.3007 </td><td> 0.4386 </td><td> 0.3960 </td><td> 0.3855 </td><td> </td></tr>
<tr><td> chicago </td><td> 0.2137 </td><td> 0.2875 </td><td> 0.3827 </td><td> 0.3635 </td><td> 0.3937 </td><td> </td></tr>
<tr><td> columbus </td><td> 0.2769 </td><td> 0.3214 </td><td> 0.4547 </td><td> 0.3823 </td><td> 0.4773 </td><td> </td></tr>
<tr><td> erie </td><td> 0.5638 </td><td> 0.4737 </td><td> 0.6302 </td><td> 0.6209 </td><td> 0.6493 </td><td> </td></tr>
<tr><td> eugene </td><td> 0.3282 </td><td> 0.3427 </td><td> 0.4313 </td><td> 0.4231 </td><td> 0.3502 </td><td> </td></tr>
<tr><td> grandmas </td><td> 0.3353 </td><td> 0.3276 </td><td> 0.4720 </td><td> 0.4335 </td><td> 0.4336 </td><td> </td></tr>
<tr><td> houston </td><td> 0.2465 </td><td> 0.3122 </td><td> 0.4322 </td><td> 0.3882 </td><td> 0.4457 </td><td> </td></tr>
<tr><td> indianapolis </td><td> 0.2733 </td><td> 0.3368 </td><td> 0.4588 </td><td> 0.3950 </td><td> 0.3589 </td><td> </td></tr>
<tr><td> lehigh </td><td> 0.6570 </td><td> 0.6015 </td><td> 0.7173 </td><td> 0.6882 </td><td> 0.7128 </td><td> </td></tr>
<tr><td> mcm </td><td> 0.3103 </td><td> 0.3486 </td><td> 0.3822 </td><td> 0.3743 </td><td> 0.3707 </td><td> </td></tr>
<tr><td> mountains2beach </td><td> 0.4737 </td><td> 0.3664 </td><td> 0.6076 </td><td> 0.5831 </td><td> 0.6125 </td><td> </td></tr>
<tr><td> nyc </td><td> 0.1994 </td><td> 0.2010 </td><td> 0.0000 </td><td> 0.2557 </td><td> 0.2788 </td><td> </td></tr>
<tr><td> ottawa </td><td> 0.3737 </td><td> 0.3477 </td><td> 0.3766 </td><td> 0.3923 </td><td> 0.3909 </td><td> </td></tr>
<tr><td> philadelphia </td><td> 0.3948 </td><td> 0.3259 </td><td> 0.4581 </td><td> 0.3955 </td><td> 0.4565 </td><td> </td></tr>
<tr><td> portland </td><td> 0.1844 </td><td> 0.2755 </td><td> 0.3644 </td><td> 0.3359 </td><td> 0.3880 </td><td> </td></tr>
<tr><td> richmond </td><td> 0.3440 </td><td> 0.3274 </td><td> 0.4354 </td><td> 0.3771 </td><td> 0.4755 </td><td> </td></tr>
<tr><td> santarosa </td><td> 0.7053 </td><td> 0.5829 </td><td> 0.5597 </td><td> 0.6070 </td><td> 0.6321 </td><td> </td></tr>
<tr><td> stgeorge </td><td> 0.2183 </td><td> 0.2355 </td><td> 0.3591 </td><td> 0.3528 </td><td> 0.3900 </td><td> </td></tr>
<tr><td> steamtown </td><td> 0.4000 </td><td> 0.3867 </td><td> 0.5092 </td><td> 0.4871 </td><td> 0.5388 </td><td> </td></tr>
<tr><td> toronto </td><td> 0.2770 </td><td> 0.2692 </td><td> 0.3167 </td><td> 0.3524 </td><td> 0.3548 </td><td> </td></tr>
<tr><td> twincities </td><td> 0.1987 </td><td> 0.2444 </td><td> 0.3272 </td><td> 0.3011 </td><td> 0.3429 </td><td> </td></tr>
<tr><td> vermont </td><td> 0.3761 </td><td> 0.4204 </td><td> 0.5403 </td><td> 0.4743 </td><td> 0.5272 </td><td> </td></tr>
<tr><th> Total </th><th> 0.2683 </th><th> 0.2560 </th><th> 0.4044 </th><th> 0.3259 </th><th> 0.3888 </th><th> </td></tr>
</tbody></table>

          <p>
            So, to estimate a cutoff, I sort all finishers in decreasing order by qualification margin and give each
            a weight equal to the registration rate for their qualifying race. I then run a cumulative sum down the list
            until the total is equal to the number of finishers who ran Boston from these races last year. This person's
            margin represents the predicted cutoff and takes into account registration rate variability between races.
            If this same method was applied last year, the prediction would have been 133 seconds - not quite 147, but
            noticeably closer than 91.
          </p>

          <h4>Boston Marathon 2017 cutoff prediction: -40 seconds, or <span style='color:red; font-weight:bold'>NO CUTOFF</span>!</h4>

          <p>
            From a practical point of view, this is largely because the Boston marathon itself contributes a huge number
            of qualifiers and has a relatively high registration rate, so this year's rather hot and slow Boston marathon
            dramatically reduced the expected cutoff.
          </p>

        </div>
      </div>

      <div class="box">
        <div class="header">
          Pure speculation
        </div>
        <div class="content">

          <p>
            The above analysis reduced our original assumptions by exactly one. In reality, there is also unaccounted-for
            variation in the registration rate per race <i>over time</i> and last year's number of Boston runners is not
            always an accurate proxy for this year's number of runners from these races. The proportion of the Boston field
            made up of runners from these top 25 races is not constant and varies according to both the number and speed of
            qualifiers from these races, and the many smaller qualifying races.
          </p>

          <p>
            Here's the registration rate for the analyzed races over the past 5 years:
          </p>
        
          <div id="chart0" style='width:900px; height:600px'></div>

          <p>
            These show some global year-by-year variation, but no long term trend.
          </p>

<table><thead><tr><th>Race</th><th>Q2012</th><th>Q2013</th><th>Q2014</th><th>Q2015</th><th>Q2016</th></tr></thead><tbody>
<tr><td> Field Size (FS) </td><td> 27000 </td><td> 27000 </td><td> 36000 </td><td> 30000 </td><td> 30000 </td><td> </td></tr>
<tr><td> Qualifiers (Q) </td><td> 32874 </td><td> 29286 </td><td> 36429 </td><td> 44093 </td><td> 44722 </td><td> </td></tr>
<tr><td> Met Cutoff (M) </td><td> 30622 </td><td> 29286 </td><td> 33360 </td><td> 41733 </td><td> 39333 </td><td> </td></tr>
<tr><td> Registration Rate (R) </td><td> 0.2683 </td><td> 0.2560 </td><td> 0.4044 </td><td> 0.3259 </td><td> 0.3888 </td><td> </td></tr>
<tr><td> Expected Registrants (Q x R) </td><td> 8820 </td><td> 7498 </td><td> 14733 </td><td> 14368 </td><td> 17389 </td><td> </td></tr>
<tr><td> Ran Boston (M x R) </td><td> 8216 </td><td> 7498 </td><td> 13492 </td><td> 13599 </td><td> 15294 </td><td> </td></tr>
<tr><td> % of Field [(M x R) / FS] </td><td> 30.43% </td><td> 27.77% </td><td> 37.48% </td><td> 45.33% </td><td> 50.98% </td><td> </td></tr>
<tr><td> Cutoff </td><td> 74 </td><td> 0 </td><td> 98 </td><td> 62 </td><td> 147 </td><td> </td></tr>
</tbody></table>

          <p>
            This shows that, in addition to the registration rate among these races not being constant, the proportion of registering
            qualifiers from <i>these</i> races relative to <i>all</i> races is not constant. These percentages are out of the entire
            Boston field, not just those reserved for qualifiers (typically, ~80%). Further analyses using the % of field may have to
            take this into account.
          </p>

          <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
          <script type="text/javascript">
            google.charts.load('current', {'packages':['corechart']});
            google.charts.setOnLoadCallback(drawChart);
            function drawChart() {

              // ------- Chart 0 -------
              var data = google.visualization.arrayToDataTable(
[
  ['Year', 'bayshore','baystate','bigcottonwood','berlin','boston','california_intl','chicago','columbus','erie','eugene','grandmas','houston','indianapolis','lehigh','mcm','mountains2beach','nyc','ottawa','philadelphia','portland','richmond','santarosa','stgeorge','steamtown','toronto','twincities','vermont'],
  [2012,  0.3744,  0.5094,  null,  0.0257,  0.4039,  0.2695,  0.2137,  0.2769,  0.5638,  0.3282,  0.3353,  0.2465,  0.2733,  0.6570,  0.3103,  0.4737,  0.1994,  0.3737,  0.3948,  0.1844,  0.3440,  0.7053,  0.2183,  0.4000,  0.2770,  0.1987,  0.3761,  ],
  [2013,  0.3527,  0.5311,  0.3778,  0.0360,  0.3942,  0.3007,  0.2875,  0.3214,  0.4737,  0.3427,  0.3276,  0.3122,  0.3368,  0.6015,  0.3486,  0.3664,  0.2010,  0.3477,  0.3259,  0.2755,  0.3274,  0.5829,  0.2355,  0.3867,  0.2692,  0.2444,  0.4204,  ],
  [2014,  0.5044,  0.7000,  0.5693,  0.0495,  0.5430,  0.4386,  0.3827,  0.4547,  0.6302,  0.4313,  0.4720,  0.4322,  0.4588,  0.7173,  0.3822,  0.6076,  null,  0.3766,  0.4581,  0.3644,  0.4354,  0.5597,  0.3591,  0.5092,  0.3167,  0.3272,  0.5403,  ],
  [2015,  0.4171,  0.6302,  0.4950,  0.0423,  0.3796,  0.3960,  0.3635,  0.3823,  0.6209,  0.4231,  0.4335,  0.3882,  0.3950,  0.6882,  0.3743,  0.5831,  0.2557,  0.3923,  0.3955,  0.3359,  0.3771,  0.6070,  0.3528,  0.4871,  0.3524,  0.3011,  0.4743,  ],
  [2016,  0.4458,  0.7187,  0.5493,  0.0615,  0.4733,  0.3855,  0.3937,  0.4773,  0.6493,  0.3502,  0.4336,  0.4457,  0.3589,  0.7128,  0.3707,  0.6125,  0.2788,  0.3909,  0.4565,  0.3880,  0.4755,  0.6321,  0.3900,  0.5388,  0.3548,  0.3429,  0.5272,  ],
]
              );

              var options = {
                title: 'Registration Rate',
                hAxis: {
                  title: 'Year',
                  viewWindowMode: 'explicit',
                  viewWindow: {
                    min:2012,
                    max:2017
                  },
                  ticks: [2012, 2013, 2014, 2015, 2016, 2017]
                },
                vAxis: {
                  title: 'Registration Rate',
                  viewWindowMode:'explicit',
                  viewWindow:{
                    min:0.0,
                    max:1.0
                  }
                },
                legend: {
                  position: 'right'
                }
              };

              var chart = new google.visualization.LineChart(document.getElementById('chart0'));

              chart.draw(data, options);



              // ------- Chart 1 -------
              var data = google.visualization.arrayToDataTable(
[
  ['Margin','2012','2013','2014','2015','2016','2017'],
  [0,261,234,276,323,288,264],
  [10,321,262,308,356,387,269],
  [20,273,246,327,361,378,324],
  [30,301,259,300,419,377,295],
  [40,265,266,300,401,373,275],
  [50,265,263,346,376,409,290],
  [60,257,244,350,403,388,302],
  [70,264,220,343,390,364,307],
  [80,242,256,276,378,361,288],
  [90,221,237,315,384,345,298],
  [100,270,214,298,366,355,256],
  [110,235,211,296,338,360,290],
  [120,274,241,314,339,373,294],
  [130,238,229,292,331,374,255],
  [140,213,218,250,349,355,258],
  [150,243,202,249,342,354,266],
  [160,228,235,277,376,313,252],
  [170,254,214,271,309,351,272],
  [180,227,196,263,308,342,248],
  [190,222,200,276,308,333,245],
  [200,210,209,230,325,345,219],
  [210,212,203,236,300,327,259],
  [220,179,155,247,295,334,249],
  [230,212,189,241,290,284,242],
  [240,222,198,258,303,283,248],
  [250,235,180,233,277,336,231],
  [260,184,195,264,297,313,224],
  [270,207,181,227,292,316,225],
  [280,220,175,247,286,290,223],
  [290,168,175,236,298,324,231],
  [300,229,187,233,337,329,253],
  [310,217,181,262,316,314,258],
  [320,243,222,257,351,314,246],
  [330,246,219,286,344,335,266],
  [340,224,206,289,296,350,242],
  [350,232,185,263,307,300,269],
  [360,229,198,249,325,332,236],
  [370,218,214,244,280,318,246],
  [380,243,186,255,315,293,245],
  [390,210,167,281,254,319,243],
  [400,204,160,256,309,275,246],
  [410,223,161,225,300,288,223],
  [420,177,179,262,287,270,227],
  [430,214,166,215,268,275,258],
  [440,180,193,201,263,256,218],
  [450,174,162,241,241,272,216],
  [460,187,163,196,265,243,216],
  [470,178,158,211,233,254,185],
  [480,185,175,176,274,261,225],
  [490,171,158,204,261,257,211],
  [500,156,155,206,243,226,196],
  [510,169,147,210,211,237,196],
  [520,163,149,214,235,271,210],
  [530,182,136,204,217,234,183],
  [540,151,157,199,257,225,190],
  [550,186,144,190,231,269,164],
  [560,178,151,203,238,250,179],
  [570,176,143,172,228,209,176],
  [580,192,152,202,255,249,171],
  [590,160,141,164,210,225,173],
  [600,171,162,201,244,264,208],
  [610,186,145,209,245,241,207],
  [620,191,161,178,235,262,193],
  [630,180,148,174,259,249,215],
  [640,170,164,187,211,233,202],
  [650,179,149,219,238,241,186],
  [660,150,150,196,213,223,188],
  [670,178,146,194,213,234,180],
  [680,156,142,199,232,225,219],
  [690,150,142,179,217,257,189],
  [700,150,123,211,237,229,163],
  [710,166,139,175,206,223,175],
  [720,162,117,179,214,237,181],
  [730,153,140,165,199,223,172],
  [740,127,129,184,217,241,185],
  [750,145,121,170,198,204,203],
  [760,143,130,150,215,185,155],
  [770,131,140,146,181,198,184],
  [780,152,109,144,176,207,159],
  [790,125,133,178,179,204,154],
  [800,139,120,175,216,178,148],
  [810,146,113,154,185,187,138],
  [820,123,123,134,182,196,173],
  [830,141,103,135,182,167,143],
  [840,128,134,133,195,182,152],
  [850,145,112,154,196,175,149],
  [860,126,103,150,151,171,155],
  [870,127,118,152,138,194,123],
  [880,119,103,139,165,171,129],
  [890,116,121,145,170,151,138],
  [900,117,108,130,153,187,145],
  [910,153,117,148,199,188,173],
  [920,126,135,173,190,207,171],
  [930,151,127,152,204,197,155],
  [940,138,126,158,193,190,175],
  [950,127,109,160,192,189,149],
  [960,149,126,151,195,188,150],
  [970,134,123,164,178,154,140],
  [980,147,126,152,178,179,134],
  [990,121,113,142,175,151,143],
  [1000,125,98,127,157,173,141],
  [1010,108,133,112,165,163,140],
  [1020,111,128,135,159,162,122],
  [1030,119,109,126,147,158,127],
  [1040,108,100,110,160,152,127],
  [1050,131,89,123,152,146,122],
  [1060,103,87,134,154,151,123],
  [1070,97,95,109,136,143,114],
  [1080,115,80,121,146,135,126],
  [1090,117,92,125,140,140,101],
  [1100,101,74,102,145,163,112],
  [1110,101,79,120,134,161,127],
  [1120,119,90,108,144,122,127],
  [1130,95,100,111,132,145,82],
  [1140,92,93,119,109,126,95],
  [1150,107,88,113,109,134,102],
  [1160,99,80,107,131,125,110],
  [1170,92,94,110,140,130,94],
  [1180,82,81,103,113,127,87],
  [1190,97,80,105,124,128,91],
  [1200,89,75,114,120,141,120],
  [1210,106,70,126,139,135,99],
  [1220,94,85,104,136,116,124],
  [1230,73,70,93,120,133,101],
  [1240,92,83,106,136,116,130],
  [1250,85,80,96,120,127,109],
  [1260,93,76,111,122,135,96],
  [1270,64,83,101,142,110,97],
  [1280,77,74,81,100,115,117],
  [1290,87,82,94,106,114,90],
  [1300,73,77,93,110,102,88],
  [1310,81,71,85,117,126,87],
  [1320,61,69,95,116,122,81],
  [1330,84,64,85,105,89,101],
  [1340,79,80,81,111,109,83],
  [1350,81,68,78,103,106,82],
  [1360,77,63,75,104,112,95],
  [1370,94,76,77,83,115,77],
  [1380,86,63,71,79,94,84],
  [1390,61,53,78,98,111,67],
  [1400,70,76,74,119,120,76],
  [1410,76,76,62,93,92,86],
  [1420,65,41,79,88,89,78],
  [1430,57,42,86,94,80,70],
  [1440,50,51,88,83,95,73],
  [1450,69,60,84,92,93,77],
  [1460,70,55,75,89,98,77],
  [1470,58,53,60,110,90,72],
  [1480,62,48,72,76,98,81],
  [1490,45,59,68,95,83,82],
  [1500,72,79,70,99,110,82],
  [1510,91,79,91,95,92,79],
  [1520,78,75,74,93,109,58],
  [1530,78,66,87,111,94,79],
  [1540,55,70,80,110,109,82],
  [1550,82,58,84,99,97,84],
  [1560,64,59,77,99,77,87],
  [1570,75,49,71,83,112,75],
  [1580,72,56,68,89,86,57],
  [1590,70,68,77,105,85,66],
  [1600,45,60,64,76,73,82],
  [1610,73,73,57,95,75,76],
  [1620,66,50,63,72,93,63],
  [1630,49,58,64,104,103,51],
  [1640,62,53,63,82,69,60],
  [1650,56,53,67,90,91,72],
  [1660,58,53,57,80,80,54],
  [1670,51,38,64,72,66,70],
  [1680,43,51,69,70,70,54],
  [1690,52,55,45,61,69,57],
  [1700,41,40,64,57,59,65],
  [1710,59,45,53,74,59,62],
  [1720,41,32,56,52,65,58],
  [1730,34,43,63,54,79,51],
  [1740,54,48,59,63,71,46],
  [1750,54,45,59,65,61,57],
  [1760,56,52,52,69,64,55],
  [1770,48,32,52,65,53,44],
  [1780,46,34,60,60,56,56],
  [1790,45,38,44,79,48,43],
  [1800,56,54,60,84,61,51],
  [1810,44,36,49,67,61,54],
  [1820,55,64,61,71,74,54],
  [1830,42,50,56,70,62,41],
  [1840,48,51,54,64,74,51],
  [1850,46,40,53,76,63,44],
  [1860,35,33,76,50,72,44],
  [1870,42,40,53,46,67,39],
  [1880,55,37,57,60,64,61],
  [1890,47,41,40,60,59,48],
  [1900,35,40,49,44,60,53],
  [1910,35,40,32,54,50,39],
  [1920,50,30,38,56,53,50],
  [1930,27,35,43,57,53,45],
  [1940,41,33,40,57,52,53],
  [1950,36,37,35,46,40,46],
  [1960,25,35,39,46,47,45],
  [1970,39,33,36,43,52,45],
  [1980,30,23,46,39,46,22],
  [1990,38,31,52,56,38,41],
  [2000,28,28,36,41,37,40],
  [2010,32,35,37,31,47,38],
  [2020,34,39,22,42,46,32],
  [2030,27,26,35,34,32,37],
  [2040,26,20,41,25,39,38],
  [2050,44,34,42,42,37,45],
  [2060,23,22,30,50,37,26],
  [2070,35,21,39,36,32,29],
  [2080,34,25,22,34,41,25],
  [2090,36,36,30,30,46,32],
  [2100,30,32,40,34,37,29],
  [2110,33,27,45,33,47,33],
  [2120,46,38,39,49,36,35],
  [2130,35,26,39,39,50,30],
  [2140,31,28,32,42,40,35],
  [2150,33,32,25,41,28,30],
  [2160,33,26,37,44,42,28],
  [2170,35,27,40,43,43,29],
  [2180,37,26,21,33,35,35],
  [2190,27,26,31,43,31,36],
  [2200,29,16,31,43,34,27],
  [2210,35,29,20,28,43,40],
  [2220,25,22,32,30,39,31],
  [2230,14,29,26,37,41,25],
  [2240,28,24,22,47,25,38],
  [2250,25,24,28,28,28,19],
  [2260,19,24,21,18,34,25],
  [2270,28,12,34,32,30,19],
  [2280,23,21,20,24,30,28],
  [2290,27,17,25,29,34,26],
  [2300,21,24,22,32,35,29],
  [2310,28,23,10,24,25,26],
  [2320,22,22,23,29,24,27],
  [2330,24,21,21,27,39,21],
  [2340,18,17,29,25,28,23],
  [2350,27,25,26,29,25,24],
  [2360,15,17,16,32,30,17],
  [2370,13,28,22,26,24,26],
  [2380,18,20,14,23,32,23],
  [2390,21,13,21,21,26,22],
  [2400,20,22,23,24,28,20],
  [2410,24,27,17,23,28,28],
  [2420,17,21,22,29,29,32],
  [2430,15,20,21,32,21,19],
  [2440,20,17,23,36,22,16],
  [2450,14,19,19,24,32,31],
  [2460,24,13,29,20,42,20],
  [2470,27,17,17,27,32,20],
  [2480,18,11,16,27,20,23],
  [2490,20,16,16,19,36,26],
  [2500,21,17,18,18,15,17],
  [2510,18,19,16,18,16,9],
  [2520,11,16,23,17,19,20],
  [2530,18,20,31,29,20,22],
  [2540,20,18,24,20,25,19],
  [2550,21,17,14,15,19,20],
  [2560,14,16,21,12,20,14],
  [2570,15,13,18,14,22,12],
  [2580,10,21,9,18,26,18],
  [2590,12,16,15,19,18,14],
  [2600,15,10,26,19,20,24],
  [2610,15,13,26,17,15,18],
  [2620,22,6,7,17,11,16],
  [2630,17,10,13,13,13,16],
  [2640,9,13,13,19,18,14],
  [2650,15,16,8,23,18,13],
  [2660,20,10,17,18,14,17],
  [2670,9,14,4,12,13,13],
  [2680,12,11,7,18,18,17],
  [2690,8,9,8,18,18,11],
  [2700,21,9,20,14,18,14],
  [2710,11,19,16,20,18,16],
  [2720,16,14,21,16,19,18],
  [2730,6,11,16,24,14,12],
  [2740,16,14,10,15,20,10],
  [2750,14,13,13,17,15,22],
  [2760,11,12,11,12,20,12],
  [2770,7,13,12,14,18,12],
  [2780,12,9,15,4,15,8],
  [2790,13,11,13,12,14,9],
  [2800,15,9,8,13,16,11],
  [2810,11,10,11,12,14,11],
  [2820,10,10,16,12,13,12],
  [2830,9,13,11,17,13,13],
  [2840,7,12,6,16,10,8],
  [2850,8,17,5,15,15,10],
  [2860,10,15,10,15,23,9],
  [2870,7,7,15,15,14,14],
  [2880,7,4,7,13,13,15],
  [2890,13,9,5,11,9,10],
  [2900,8,11,10,14,14,7],
  [2910,11,12,11,13,15,9],
  [2920,14,7,6,8,10,7],
  [2930,11,5,6,16,7,9],
  [2940,8,13,14,14,11,13],
  [2950,10,9,6,12,12,11],
  [2960,8,10,11,13,5,10],
  [2970,11,11,10,10,18,12],
  [2980,10,6,5,7,11,11],
  [2990,6,8,7,8,16,10],
  [3000,11,12,5,12,8,12],
  [3010,7,10,6,9,12,10],
  [3020,8,9,10,12,13,9],
  [3030,8,8,7,7,7,15],
  [3040,12,12,6,11,4,5],
  [3050,18,7,7,8,9,11],
  [3060,9,10,6,7,8,10],
  [3070,7,3,5,13,12,8],
  [3080,4,11,8,12,14,10],
  [3090,6,8,7,13,7,8],
  [3100,10,11,7,12,11,7],
  [3110,6,5,6,14,2,5],
  [3120,4,7,7,8,7,5],
  [3130,10,9,9,9,6,9],
  [3140,8,6,5,18,9,8],
  [3150,7,3,7,7,8,6],
  [3160,2,2,7,10,8,10],
  [3170,9,3,8,5,7,8],
  [3180,6,6,6,5,7,7],
  [3190,7,3,10,8,10,6],
  [3200,6,4,7,6,10,11],
  [3210,10,3,6,8,13,7],
  [3220,4,3,4,15,8,3],
  [3230,4,6,2,13,9,5],
  [3240,7,8,8,9,9,7],
  [3250,10,2,3,10,9,7],
  [3260,4,3,5,5,9,6],
  [3270,0,2,11,5,9,5],
  [3280,4,3,2,3,6,10],
  [3290,4,5,4,8,7,8],
  [3300,3,6,6,4,16,4],
  [3310,9,7,0,12,9,6],
  [3320,5,5,6,5,12,6],
  [3330,5,2,2,5,7,10],
  [3340,4,5,6,6,7,5],
  [3350,3,4,11,8,4,3],
  [3360,7,7,5,9,6,5],
  [3370,5,7,5,4,5,3],
  [3380,2,1,3,7,3,2],
  [3390,2,4,5,3,7,5],
  [3400,7,2,4,7,6,2],
  [3410,10,3,4,6,5,4],
  [3420,5,7,8,6,3,3],
  [3430,2,6,2,5,2,3],
  [3440,8,3,2,2,2,3],
  [3450,5,6,2,6,8,3],
  [3460,4,2,6,7,4,3],
  [3470,4,0,3,5,1,3],
  [3480,4,3,4,5,3,4],
  [3490,3,3,4,1,1,7],
  [3500,4,1,2,3,3,4],
  [3510,3,5,2,5,4,2],
  [3520,3,3,3,2,3,3],
  [3530,2,2,1,2,5,3],
  [3540,2,1,2,4,4,3],
  [3550,0,3,2,1,1,3],
  [3560,2,7,7,3,3,2],
  [3570,3,1,3,3,5,3],
  [3580,1,1,1,4,2,3],
  [3590,4,3,3,5,5,1],
  [3600,3,3,5,5,5,3],
  [3610,4,3,3,5,2,2],
  [3620,2,1,3,4,3,4],
  [3630,8,1,6,3,2,4],
  [3640,3,1,4,2,6,0],
  [3650,2,1,3,9,3,5],
  [3660,1,2,3,1,2,2],
  [3670,3,2,1,4,1,0],
  [3680,1,7,5,6,3,3],
  [3690,1,3,3,5,1,3],
  [3700,1,4,2,3,2,7],
  [3710,4,3,2,1,1,1],
  [3720,3,5,3,1,2,3],
  [3730,2,1,4,0,5,3],
  [3740,2,1,2,3,5,1],
  [3750,2,2,1,3,5,1],
  [3760,4,0,0,0,2,1],
  [3770,1,1,0,2,4,2],
  [3780,1,4,1,3,1,1],
  [3790,2,4,2,0,2,2],
  [3800,2,1,1,3,1,4],
  [3810,1,0,4,2,0,3],
  [3820,2,3,0,4,1,1],
  [3830,3,1,0,0,2,0],
  [3840,2,3,1,2,3,0],
  [3850,2,3,2,2,2,3],
  [3860,3,2,4,4,3,1],
  [3870,2,0,2,4,4,0],
  [3880,2,0,1,1,2,1],
  [3890,0,0,4,4,0,1],
  [3900,5,2,1,0,1,1],
  [3910,2,0,0,3,2,2],
  [3920,3,0,0,0,0,1],
  [3930,2,1,2,3,5,1],
  [3940,1,0,3,2,1,2],
  [3950,3,3,2,1,3,1],
  [3960,1,2,4,3,3,1],
  [3970,2,5,2,1,0,2],
  [3980,4,0,2,4,2,0],
  [3990,1,4,2,0,2,3],
  [4000,2,0,3,1,1,3],
]
              );

              var options = {
                title: 'Qualifying Margin Distribution by Year',
                hAxis: {
                  title: 'Qualifying Margin (s)',
                  viewWindowMode: 'explicit',
                  viewWindow: {
                    min:0,
                    max:4000
                  },
                  //ticks: [2012, 2013, 2014, 2015, 2016, 2017]
                },
                vAxis: {
                  title: '# Qualifiers',
                  viewWindowMode:'explicit',
                  viewWindow:{
                    min:0,
                    max:500
                  }
                },
                //legend: 'none',
                interpolateNulls: false,
                series: {
                  0: {curveType:'function', lineWidth:1, pointSize:0, color:'gray'},
                  1: {curveType:'function', lineWidth:1, pointSize:0, color:'blue'},
                  2: {curveType:'function', lineWidth:1, pointSize:0, color:'red'},
                  3: {curveType:'function', lineWidth:1, pointSize:0, color:'green'},
                  4: {curveType:'function', lineWidth:1, pointSize:0, color:'orange'},
                  5: {curveType:'function', lineWidth:1, pointSize:0, color:'purple'},
                  6: {curveType:'function', lineWidth:1, pointSize:0, color:'brown'},
                }
              };

              var chart = new google.visualization.ScatterChart(document.getElementById('chart1'));

              chart.draw(data, options);
            }
          </script>

          <p>
            The distribution of qualifying margins by year is shown below:
          </p>

          <div id="chart1" style='width:900px; height:600px'></div>

          <p>
            It's clear that the average speed of qualifiers from these races was lowest for 2013 and this year,
            reflecting, most likely, unseasonably warm temperatures at Boston in 2012 and 2016. Qualifying times were
            much better for 2015 and 2016. Qualification <i>at</i> Boston for the next year seems to be a strong driver
            of the overall qualification rate and cutoff time since it shows unusually high variability and contributes
            a huge proportion of the field.
          </p>

          <p>
            I'm still working on a way of collating these observations into a more comprehensive predictive model. More to come.
          </p>

        </div>
      </div>
    </div>
  </body>
</html>
